(this.webpackJsonpmyapp=this.webpackJsonpmyapp||[]).push([[0],{106:function(n,e,t){"use strict";t.r(e);var c=t(0),o=t.n(c),r=t(9),a=t.n(r),i=(t(77),t(78),t(18)),s=t.n(i),u=t(45),l=t(37),d=t(21),p=t(55),f=t.n(p),j=t(135),E=t(139),h=t(140),g=t(141),b=t(143),v=t(56),m=t(57),x=function(){function n(){var e=this;Object(v.a)(this,n),this.recognition=new window.webkitSpeechRecognition,this.running=!1,this.onFinal=void 0,this.onProgress=void 0,this.onError=void 0,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.onresult=function(n){for(var t=n.resultIndex;t<n.results.length;++t)n.results[t].isFinal?e.onFinal&&e.onFinal(n.results[t][0].transcript):e.onProgress&&e.onProgress(n.results[t][0].transcript)},this.recognition.onerror=function(n){console.warn(n),e.onError&&e.onError()},this.start()}return Object(m.a)(n,[{key:"start",value:function(){this.running=!0,this.recognition.start()}},{key:"stop",value:function(){this.running=!1,this.recognition.stop()}},{key:"toggle",value:function(){this.running?this.stop():this.start()}}]),n}(),O=t(58),w=t(4);function y(n){var e=n.expiryTimestamp,t=Object(O.useTimer)({expiryTimestamp:e,onExpire:function(){return alert("testcode")}}),c=t.seconds,o=t.minutes,r=t.isRunning,a=t.start,i=t.restart;return Object(w.jsxs)("div",{style:{textAlign:"center"},children:[Object(w.jsxs)("div",{style:{fontSize:"100px"},children:[Object(w.jsx)("span",{children:o}),":",Object(w.jsx)("span",{children:c})]}),Object(w.jsx)("p",{children:r?"Running":"Not running"}),Object(w.jsx)("button",{onClick:a,children:"Start"}),Object(w.jsx)("button",{onClick:function(){var n=new Date;n.setSeconds(n.getSeconds()+900),i(n)},children:"Restart"})]})}var A=Object(j.a)({button:{backgroundColor:"green",width:320},textarea:{resize:"none",width:315,height:200},icons:{width:50,height:50,verticalalign:"middle"},imageicons:{width:50,height:50,verticalalign:"middle",position:"absolute"},Box:{width:315,height:200},reaction:{width:50,height:50}}),k=function(n){var e=n.roomId,t=o.a.useRef(new f.a({key:"00403e5e-fdf0-4ad6-bdf9-88c71127156f"})),c=o.a.useState([]),r=Object(d.a)(c,2),a=r[0],i=r[1],p=o.a.useState(),j=Object(d.a)(p,2),v=j[0],m=j[1],O=o.a.useState(""),k=Object(d.a)(O,2),S=k[0],F=k[1],D=o.a.useState([]),N=Object(d.a)(D,2),R=N[0],T=N[1],L=o.a.useState(),M=Object(d.a)(L,2),P=M[0],Y=M[1],_=o.a.useRef(null),J=o.a.useRef(null),X=o.a.useState(!1),z=Object(d.a)(X,2),K=z[0],U=z[1],W=o.a.useState(!1),q=Object(d.a)(W,2),G=q[0],H=q[1],Q=o.a.useState(!1),V=Object(d.a)(Q,2),Z=V[0],$=V[1],nn=A(),en=document.getElementById("js-startScreenShare-trigger");o.a.useEffect((function(){navigator.mediaDevices.getUserMedia({video:{width:320,height:240},audio:!0}).then((function(n){m(n),_.current&&(_.current.srcObject=n,_.current.play().catch((function(n){return console.log(n)})))})).catch((function(n){console.log(n)}))}),[]);var tn=function(){var n=Object(l.a)(s.a.mark((function n(){var c,o,r,a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.current){n.next=18;break}if(t.current.open){n.next=3;break}return n.abrupt("return");case 3:(c=t.current.joinRoom(e,{mode:"sfu",stream:v})).once("open",(function(){console.log("=== You joined ===\n"),T((function(n){return[].concat(Object(u.a)(n),[{peerId:t.current.id,image:"https://iconbu.com/wp-content/uploads/2021/03/%E3%81%9F%E3%81%AC%E3%81%8D%E3%81%95%E3%82%93%E3%81%AE%E3%82%A2%E3%82%A4%E3%82%B3%E3%83%B3.jpg"}])}))})),c.on("peerJoin",(function(n){console.log("=== ".concat(n," joined ===\n"))})),c.on("stream",function(){var n=Object(l.a)(s.a.mark((function n(e){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i((function(n){return[].concat(Object(u.a)(n),[{stream:e,peerId:e.peerId}])})),T((function(n){return[].concat(Object(u.a)(n),[{peerId:e.peerId,image:"https://iconbu.com/wp-content/uploads/2021/03/%E3%81%9F%E3%81%AC%E3%81%8D%E3%81%95%E3%82%93%E3%81%AE%E3%82%A2%E3%82%A4%E3%82%B3%E3%83%B3.jpg"}])}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),window.addEventListener("focus",(function(){console.log("\u30da\u30fc\u30b8\u306b\u30d5\u30a9\u30fc\u30ab\u30b9\u3055\u308c\u305f"),c.send("\u30da\u30fc\u30b8\u306b\u30d5\u30a9\u30fc\u30ab\u30b9\u3055\u308c\u305f")})),window.addEventListener("blur",(function(){console.log("\u30da\u30fc\u30b8\u304b\u3089\u30d5\u30a9\u30fc\u30ab\u30b9\u304c\u5916\u308c\u305f"),c.send("\u30da\u30fc\u30b8\u304b\u3089\u30d5\u30a9\u30fc\u30ab\u30b9\u304c\u5916\u308c\u305f")})),c.on("data",(function(n){var e=n.src,t=n.data;console.log("".concat(e,": ").concat(t,"\n"));var c="".concat(e,":").concat(t,"\n");document.getElementById("t_chat").value+=c})),c.on("peerLeave",(function(n){i((function(e){return e.filter((function(e){return e.peerId===n&&e.stream.getTracks().forEach((function(n){return n.stop()})),e.peerId!==n}))})),console.log("=== ".concat(n," left ===\n"))})),(new x).onFinal=function(n){var e=n;c.send(e),console.log(e);var o="".concat(t.current.id,":").concat(e,"\n");document.getElementById("t_chat").value+=o},Y(c),o=function(n){var c=e+"_screen",o=null;void 0===n?o=t.current.joinRoom(c,{mode:"sfu"}):(console.log("check"),o=t.current.joinRoom(c,{mode:"sfu",stream:n})),o.once("open",(function(){console.log("=== You Screen joined ===\n")})),o.on("peerJoin",(function(n){console.log("=== ".concat(n," joined ===\n"))})),o.on("stream",function(){var n=Object(l.a)(s.a.mark((function n(e){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("catch"),J.current&&(J.current.srcObject=e,J.current.play().catch((function(n){return console.log(n)})));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());var r=document.getElementById("js-remote-screen-streams");return null!=r&&r.addEventListener("click",(function(n){var e,c=n.offsetX,r=n.offsetY;console.log(c,r),null===(e=o)||void 0===e||e.send({offsetX:c,offsetY:r});var a=document.getElementById(t.current.id);console.log(a),a.style.left=c+"px",a.style.top=r+"px"})),o.on("data",(function(n){var e=n.src,t=n.data,c=document.getElementById(e);c.style.left=t.offsetX+"px",c.style.top=t.offsetY+"px",console.log("".concat(e,": ").concat(t.offsetX," ").concat(t.offsetY,"\n"))})),o.on("peerLeave",(function(n){console.log("=== ".concat(n," left ===\n"))})),o.once("close",(function(){})),o},r=o(void 0),a=function(){var n=Object(l.a)(s.a.mark((function n(){var e;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,navigator.mediaDevices.getDisplayMedia({video:{width:1600,height:1280}}).then((function(n){e=n,J.current&&(J.current.srcObject=n,J.current.play().catch((function(n){return console.log(n)})))})).catch((function(n){console.log(n)}));case 2:r.close(),r=o(e);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),null===en||void 0===en||en.addEventListener("click",a,{once:!0});case 18:U((function(n){return!n}));case 19:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),cn=function(){H(!G)},on=function(){$(!Z)},rn=function(n){"a"===n?null===P||void 0===P||P.send("(*^^)v"):"b"===n?null===P||void 0===P||P.send("!(^^)!"):"c"===n?null===P||void 0===P||P.send("( ;\u2200;)"):null===P||void 0===P||P.send("a")};return Object(w.jsxs)("div",{children:[Object(w.jsx)("button",{onClick:cn,children:"Webcam"}),Object(w.jsx)("button",{onClick:on,children:"Text"}),Object(w.jsxs)("div",{children:[R.map((function(n,e){return n.image=1===e?"https://iconbu.com/wp-content/uploads/2020/08/%E3%83%95%E3%83%88%E3%82%A2%E3%82%B4%E3%81%95%E3%82%93.jpg":2===e?"https://iconbu.com/wp-content/uploads/2021/06/%E3%81%A4%E3%81%B0%E3%82%81%E3%81%95%E3%82%93.jpg":3===e?"https://iconbu.com/wp-content/uploads/2021/06/%E3%81%A6%E3%82%8B%E3%81%A6%E3%82%8B%E3%81%BC%E3%81%86%E3%81%9A%E3%81%95%E3%82%93%E3%81%AE%E3%82%A2%E3%82%A4%E3%82%B3%E3%83%B3.jpg":4===e?"https://iconbu.com/wp-content/uploads/2020/09/%E3%81%9F%E3%81%AC%E3%81%8D%E3%81%95%E3%82%93.jpg":"https://iconbu.com/wp-content/uploads/2021/03/%E3%81%9F%E3%81%AC%E3%81%8D%E3%81%95%E3%82%93%E3%81%AE%E3%82%A2%E3%82%A4%E3%82%B3%E3%83%B3.jpg",Object(w.jsx)("div",{children:Object(w.jsx)(C,{avater:n},n.peerId)})})),Object(w.jsx)("video",{id:"js-remote-screen-streams",ref:J,playsInline:!0})]}),Object(w.jsxs)(b.a,{variant:"persistent",ModalProps:{keepMounted:!0},anchor:"right",open:Z,onClose:on,children:[Object(w.jsx)(y,{expiryTimestamp:Date}),Object(w.jsx)(g.a,{variant:"contained",className:nn.button,onClick:function(){return tn()},disabled:K,children:"start"}),Object(w.jsx)(g.a,{variant:"contained",className:nn.button,onClick:function(){return P&&(P.close(),i((function(n){return n.filter((function(n){return n.stream.getTracks().forEach((function(n){return n.stop()})),!1}))}))),console.log("=== You left ===\n"),void U((function(n){return!n}))},disabled:!K,children:"end"}),Object(w.jsx)(g.a,{variant:"contained",className:nn.button,onClick:function(){console.log(a)},children:"check"}),Object(w.jsx)(g.a,{variant:"contained",className:nn.button,id:"js-startScreenShare-trigger",children:"\u753b\u9762\u5171\u6709\u958b\u59cb"}),R.map((function(n,e){return n.image=1===e?"https://iconbu.com/wp-content/uploads/2020/08/%E3%83%95%E3%83%88%E3%82%A2%E3%82%B4%E3%81%95%E3%82%93.jpg":2===e?"https://iconbu.com/wp-content/uploads/2021/06/%E3%81%A4%E3%81%B0%E3%82%81%E3%81%95%E3%82%93.jpg":3===e?"https://iconbu.com/wp-content/uploads/2021/06/%E3%81%A6%E3%82%8B%E3%81%A6%E3%82%8B%E3%81%BC%E3%81%86%E3%81%9A%E3%81%95%E3%82%93%E3%81%AE%E3%82%A2%E3%82%A4%E3%82%B3%E3%83%B3.jpg":4===e?"https://iconbu.com/wp-content/uploads/2020/09/%E3%81%9F%E3%81%AC%E3%81%8D%E3%81%95%E3%82%93.jpg":"https://iconbu.com/wp-content/uploads/2021/03/%E3%81%9F%E3%81%AC%E3%81%8D%E3%81%95%E3%82%93%E3%81%AE%E3%82%A2%E3%82%A4%E3%82%B3%E3%83%B3.jpg",Object(w.jsx)("div",{children:Object(w.jsx)(I,{avater:n},n.peerId)})})),Object(w.jsx)("textarea",{className:nn.textarea,readOnly:!0,id:"t_chat"}),Object(w.jsx)(E.a,{value:S,name:"text",onChange:function(n){return function(n){F(n.target.value)}(n)},onKeyDown:function(n){"Enter"===n.key&&function(){console.log("send"),F(""),null===P||void 0===P||P.send(S);var n="".concat(t.current.id,":").concat(S,"\n");document.getElementById("t_chat").value+=n}()}}),Object(w.jsxs)(h.a,{className:nn.Box,children:[Object(w.jsx)(g.a,{variant:"contained",className:nn.reaction,onClick:function(){return rn("a")},children:"a"}),Object(w.jsx)(g.a,{variant:"contained",className:nn.reaction,onClick:function(){return rn("b")},children:"b"}),Object(w.jsx)(g.a,{variant:"contained",className:nn.reaction,onClick:function(){return rn("c")},children:"c"})]})]}),Object(w.jsxs)(b.a,{variant:"persistent",ModalProps:{keepMounted:!0},anchor:"right",open:G,onClose:cn,children:[Object(w.jsx)("video",{ref:_,playsInline:!0}),a.map((function(n){return Object(w.jsx)(B,{video:n},n.peerId)}))]})]})},B=function(n){var e=o.a.useRef(null);return o.a.useEffect((function(){e.current&&(e.current.srcObject=n.video.stream,e.current.play().catch((function(n){return console.log(n)})))}),[n.video]),Object(w.jsx)("video",{ref:e,playsInline:!0})},I=function(n){var e=A();return Object(w.jsxs)("div",{children:[Object(w.jsx)("img",{className:e.icons,src:n.avater.image,alt:n.avater.peerId}),Object(w.jsx)("span",{children:n.avater.peerId})]})},C=function(n){var e=A();return Object(w.jsx)("div",{children:Object(w.jsx)("img",{id:n.avater.peerId,className:e.imageicons,src:n.avater.image,alt:n.avater.peerId})})},S=function(){return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(k,{roomId:"1"})})},F=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,146)).then((function(e){var t=e.getCLS,c=e.getFID,o=e.getFCP,r=e.getLCP,a=e.getTTFB;t(n),c(n),o(n),r(n),a(n)}))};a.a.render(Object(w.jsx)(o.a.StrictMode,{children:Object(w.jsx)(S,{})}),document.getElementById("root")),F()},77:function(n,e,t){},78:function(n,e,t){}},[[106,1,2]]]);
//# sourceMappingURL=main.ec064eb6.chunk.js.map